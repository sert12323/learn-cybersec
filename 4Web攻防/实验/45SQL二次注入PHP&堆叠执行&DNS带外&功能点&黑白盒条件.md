# PHP应用&SQL二次注入&堆叠执行

## SQL二次注入

网站功能正常,实现用户注册登录和修改密码

![image-20251211174926942](images/image-20251211174926942.png)

因为没有回显,只能用报错注入或者延时注入

注册账户

```
admin'and updatexml(1,concat(0x7e,(SELECT version()),0x7e),1)#
```

![image-20251211191752976](images/image-20251211191752976.png)

注册成功

![image-20251211192133866](images/image-20251211192133866.png)

测试登录

![image-20251211192307592](images/image-20251211192307592.png)

登录成功

![image-20251211192324847](images/image-20251211192324847.png)

在修改密码的地方随便输入内容

![image-20251211192425381](images/image-20251211192425381.png)

注入成功

![image-20251211192440275](images/image-20251211192440275.png)

原理在修改密码时会验证密码是否正确

![image-20251211193553831](images/image-20251211193553831.png)

![image-20251211194540062](images/image-20251211194540062.png)

`addslashes`会把接收的数据`(点) 变成加上/(反斜杠)

但是存储到数据库时会变成原本的数据,没有/(反斜杠)





## 堆叠执行

![image-20251211205800741](images/image-20251211205800741.png)

==mysqli_multi_query==函数 只能执行一条sql命令